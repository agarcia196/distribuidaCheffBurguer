<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="Web site created using create-react-app">
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png">
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json">

    <title>Cheff Burger</title>
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="/css/styles.css" rel="stylesheet" />

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GWFWRX0ZCT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
 
  gtag('config', 'G-GWFWRX0ZCT');
</script>

     <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PWFX9V8');</script>
    <!-- End Google Tag Manager -->



    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <div id="body"></div>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PWFX9V8"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <script type="module">
        import 'https://cdn.jsdelivr.net/npm/contentful@latest/dist/contentful.browser.min.js'
      const client = contentful.createClient({
          // This is the space ID. A space is like a project folder in Contentful terms
          space: "b4e4el8wajm5",
          // This is the access token for this space. Normally you get both ID and the token in the Contentful web app
          accessToken: "PFFeCp8l2C15CYV_uqTBFt1R1EkxVFJY9j2dPqpK_u4"
      });

      // console.log('hasta aqui, todo bien');

      const promociones = await client.getEntries({
          'content_type': 'platos',
          'fields.promociones[exists]': true //Trae platos en promoción
      });
      const sinPromociones = await client.getEntries({
          'content_type': 'platos',
          'fields.promociones[exists]': false //Trae platos sin promoción
      });
      const principales = await client.getEntries({
          'content_type': 'platos',
          'fields.principal': true //Trae platos principales
      });

      const todas = await client.getEntries({
          'content_type': 'platos'
      });

      // ---------------------------- Para la compra de ingredientes ---------------------------------------------

      console.log('********************* PROMOCIONES ****************************')
      console.log(promociones.items)
      console.log('********************* SIN PROMOCIONES ****************************')
      console.log(sinPromociones.items)
      console.log('********************* PRINCIPALES ****************************')
      console.log(principales.items)
      console.log('********************* TODAS ****************************')
      console.log(todas.items)

      $(document).ready(function(){
          $(principales.items).each(function(index){
              console.log(this)
              console.log(this.fields.nombre)
              $('#slide'+(index+1)).find('h5').text(this.fields.nombre)
              $('#slide'+(index+1)).find('h2').text(this.fields.apodo)
              $('#slide'+(index+1)).find('p').text(this.fields.descripcion)
              $('#slide'+(index+1)).find('p#precio').text(this.fields.precio)
              $('#slide'+(index+1)).find('img').attr("src", this.fields.bgImage.fields.file.url)
          });
          
          $(promociones.items).each(function(index){
              $('#promotion-product').append('<li class="product col"><div class="promotion-product-container"><span class="dot dot-left-top">&nbsp;</span><span class="dot dot-right-top">&nbsp;</span><spanclass="dot dot-left-bottom">&nbsp;</span><span class="dot dot-right-bottom">&nbsp;</span><div class="promotion-product-image"><a href="#"><img src="'+this.fields.imagen.fields.file.url+'"/></a></div><div class="promotion-product-desc"><div class="promotion-product-title"><h4><a href="#">'+this.fields.nombre+'</a></h4></div><div class="promotion-product-content content"><p>'+this.fields.descripcion+'</p></div></div><div class="price-tag"><span class="price">'+'$ '+this.fields.precio+'</span></div></div></li>');
          });
      });

      $(document).ready(function(){
          $(todas.items).each(function(index){
              console.log(this)
              console.log(this.fields.nombre)
              $('#menu'+(index+1)).find('h5').text(this.fields.nombre)
              $('#menu'+(index+1)).find('h2').text(this.fields.apodo)
              $('#menu'+(index+1)).find('p').text(this.fields.descripcion)
              $('#menu'+(index+1)).find('p#precio').text(this.fields.precio)
              $('#menu'+(index+1)).find('img').attr("src", this.fields.bgImage.fields.file.url)
          });
          
          $(promociones.items).each(function(index){
              $('#promotion-product').append('<li class="product col"><div class="promotion-product-container"><span class="dot dot-left-top">&nbsp;</span><span class="dot dot-right-top">&nbsp;</span><spanclass="dot dot-left-bottom">&nbsp;</span><span class="dot dot-right-bottom">&nbsp;</span><div class="promotion-product-image"><a href="#"><img src="'+this.fields.imagen.fields.file.url+'"/></a></div><div class="promotion-product-desc"><div class="promotion-product-title"><h4><a href="#">'+this.fields.nombre+'</a></h4></div><div class="promotion-product-content content"><p>'+this.fields.descripcion+'</p></div></div><div class="price-tag"><span class="price">'+'$ '+this.fields.precio+'</span></div></div></li>');
          });
      });


      // COMPAR INGREDIENTES
      $(document).ready(function(){
        $.ajax({
            // la URL para la petición
            url : ',

            // la información a enviar
            // (también es posible utilizar una cadena de datos)
            data : { id : 123 },

            // especifica si será una petición POST o GET
            type : 'GET',

            // el tipo de información que se espera de respuesta
            dataType : 'json',

            // código a ejecutar si la petición es satisfactoria;
            // la respuesta es pasada como argumento a la función
            success : function(json) {
                $('<h1/>').text(json.title).appendTo('body');
                $('<div class="content"/>')
                    .html(json.html).appendTo('body');
            },

            // código a ejecutar si la petición falla;
            // son pasados como argumentos a la función
            // el objeto de la petición en crudo y código de estatus de la petición
            error : function(xhr, status) {
                alert('Disculpe, existió un problema');
            },

            // código a ejecutar sin importar si la petición falló o no
            complete : function(xhr, status) {
                alert('Petición realizada');
            }
        });
      });
  </script>
</body>

</html>